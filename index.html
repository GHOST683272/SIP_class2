<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SIP Round-2 — Class 2 (300 Questions, input answers)</title>
<style>
  :root{
    --accent:#0b63d5;
    --muted:#666;
    --good:#c9f1d0;
    --bad:#ffd6d6;
    --card:#ffffff;
    --bg:#f3f8ff;
  }
  html,body{height:100%;margin:0;}
  body{
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background:var(--bg);
    color:#111;
    padding:18px;
    box-sizing:border-box;
  }
  header{
    display:flex;
    gap:12px;
    align-items:center;
    margin-bottom:14px;
  }
  header img{height:54px; width:54px; object-fit:contain; border-radius:8px; background:white; padding:6px;}
  h1{font-size:20px;margin:0;color:var(--accent);}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 18px;}
  button{
    background:var(--accent); color:white; border:0; padding:10px 14px;
    border-radius:8px; cursor:pointer; font-weight:600;
  }
  button.ghost{background:transparent;color:var(--accent);border:2px solid var(--accent);}
  #scoreBox{margin-left:8px; font-weight:700; color:#083a8a; align-self:center;}
  main{display:block;}
  .grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:16px;
  }
  .column{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .card{
    background:var(--card);
    border-radius:10px;
    padding:10px;
    box-shadow:0 1px 4px rgba(20,30,60,0.06);
    break-inside:avoid;
  }
  .qnum{font-weight:700;color:var(--muted); font-size:13px; display:inline-block; width:30px;}
  .qtext{font-size:16px; display:inline-block; vertical-align:middle; margin-left:6px;}
  .ansBox{
    width:110px; padding:6px; font-size:15px; border-radius:6px; border:1px solid #ccc;
  }
  .correctMark{color:green;font-weight:700;margin-left:8px;}
  .wrongMark{color:#b30000;font-weight:700;margin-left:8px;}
  #resultsPanel{margin-top:16px; padding:12px; background:white; border-left:5px solid var(--accent); border-radius:8px; display:none; max-height:50vh; overflow:auto;}
  .solutions{margin-top:12px;}
  .sol{padding:8px;border-radius:6px;margin-bottom:6px;}
  .sol.correct{background:var(--good);}
  .sol.incorrect{background:var(--bad);}
  footer{margin-top:18px; font-size:13px; color:var(--muted);}
  @media(max-width:900px){
    .grid{grid-template-columns:1fr;}
    header img{height:46px;width:46px;}
  }
</style>
</head>
<body>

<header>
  <img src="" alt="logo" id="logoPlaceholder">
  <div>
    <h1>SIP Round-2 — Class 2 (300 Questions)</h1>
    <div style="font-size:13px;color:var(--muted)">Mixed arithmetic (Addition, Subtraction, Multiplication, Division)</div>
  </div>
  <div style="margin-left:auto;display:flex;align-items:center;">
    <div id="scoreBox">Not yet attempted</div>
  </div>
</header>

<div class="controls">
  <button id="btnCheck">Check Answers</button>
  <button id="btnReset" class="ghost">New Set (Regenerate)</button>
  <button id="btnShowSol" class="ghost">Show Solutions</button>
  <button id="btnDownload" class="ghost">Print / Save as PDF</button>
</div>

<main id="mainArea">
  <div class="grid" id="gridArea">
    <div class="column" id="colLeft"></div>
    <div class="column" id="colRight"></div>
  </div>

  <div id="resultsPanel">
    <div id="summaryText"></div>
    <div class="solutions" id="solutions"></div>
  </div>
</main>

<footer>
  Tip: Use the "New Set" button to regenerate a different combination. Hosted as a static page — works offline and on GitHub Pages.
</footer>

<script>
/* Working 300-question input-answer generator
   - TOTAL questions
   - Range 1..100 (R3)
   - Operators: + - × ÷ (division returns integer quotient)
*/

const TOTAL = 300;
const RANGE_MIN = 1;
const RANGE_MAX = 100;
const OPS = ["+", "-", "×", "÷"];

function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }

function genArithmetic(){
  const op = OPS[randInt(0, OPS.length-1)];
  let a,b,answer;
  if(op === "+"){
    a = randInt(RANGE_MIN, RANGE_MAX);
    b = randInt(RANGE_MIN, RANGE_MAX);
    answer = a + b;
  } else if(op === "-"){
    a = randInt(RANGE_MIN, RANGE_MAX);
    b = randInt(RANGE_MIN, a); // ensure non-negative
    answer = a - b;
  } else if(op === "×"){
    b = randInt(2,12);
    a = randInt(2, Math.max(2, Math.floor(RANGE_MAX / b)));
    answer = a * b;
  } else { // division — make dividend multiple of divisor
    b = randInt(2,12);
    const maxMult = Math.max(1, Math.floor(RANGE_MAX / b));
    const m = randInt(1, maxMult);
    a = m * b;
    answer = m;
  }
  return { text: `${a} ${op} ${b} =`, correct: answer };
}

let currentSet = [];

// Build question set
function buildSet(){
  const arr = [];
  for(let i=0;i<TOTAL;i++){
    const q = genArithmetic();
    arr.push({ id: i+1, qtext: q.text, correct: q.correct });
  }
  return arr;
}

// Efficient render using DocumentFragment for 300 items
function render(set){
  const left = document.getElementById('colLeft');
  const right = document.getElementById('colRight');
  left.innerHTML = '';
  right.innerHTML = '';

  const fragLeft = document.createDocumentFragment();
  const fragRight = document.createDocumentFragment();

  for(let i=0;i<set.length;i++){
    const item = set[i];
    const card = document.createElement('div');
    card.className = 'card';
    // create inner markup
    card.innerHTML = `
      <div>
        <span class="qnum">${item.id}.</span>
        <span class="qtext">${item.qtext}</span>
      </div>
      <div style="margin-top:8px;">
        <input type="number" inputmode="numeric" class="ansBox" id="ans-${item.id}" aria-label="Answer for question ${item.id}">
      </div>
    `;
    // alternate columns
    if(i % 2 === 0) fragLeft.appendChild(card); else fragRight.appendChild(card);
  }

  left.appendChild(fragLeft);
  right.appendChild(fragRight);
}

// Check answers and show results
function checkAnswers(){
  let score = 0;
  const solDiv = document.getElementById('solutions');
  solDiv.innerHTML = '';
  // Iterate and compare
  for(const item of currentSet){
    const inp = document.getElementById(`ans-${item.id}`);
    const raw = inp ? inp.value.trim() : '';
    // Use strict numeric comparison: treat empty as no answer
    let parsed = raw === '' ? null : Number(raw);
    const sol = document.createElement('div');
    sol.className = 'sol';
    if(parsed !== null && !Number.isNaN(parsed) && Number(parsed) === Number(item.correct)){
      score++;
      sol.classList.add('correct');
      sol.innerHTML = `<strong>Q${item.id}</strong> — Your answer: <strong>${parsed}</strong> — ✅ Correct`;
    } else {
      sol.classList.add('incorrect');
      sol.innerHTML = `<strong>Q${item.id}</strong> — Your answer: <em>${raw || 'No answer'}</em> — ❌ Correct: <strong>${item.correct}</strong>`;
    }
    solDiv.appendChild(sol);
  }
  document.getElementById('scoreBox').textContent = `Score: ${score} / ${TOTAL}`;
  document.getElementById('summaryText').innerHTML = `<strong>Result:</strong> You scored <strong>${score}</strong> out of <strong>${TOTAL}</strong>.`;
  document.getElementById('resultsPanel').style.display = 'block';
  document.getElementById('resultsPanel').scrollIntoView({ behavior: 'smooth' });
}

// Show solutions only
function showSolutionsOnly(){
  const solDiv = document.getElementById('solutions');
  solDiv.innerHTML = '';
  for(const item of currentSet){
    const sol = document.createElement('div');
    sol.className = 'sol correct';
    sol.innerHTML = `<strong>Q${item.id}:</strong> ${item.qtext} <strong>${item.correct}</strong>`;
    solDiv.appendChild(sol);
  }
  document.getElementById('summaryText').innerHTML = `<strong>All solutions</strong>`;
  document.getElementById('resultsPanel').style.display = 'block';
  document.getElementById('resultsPanel').scrollIntoView({ behavior: 'smooth' });
}

// Regenerate set
function regenerate(){
  // Slight UX: confirm if there are answers typed
  const anyFilled = Array.from(document.querySelectorAll('.ansBox')).some(i => i.value.trim() !== '');
  if(anyFilled){
    if(!confirm('Generate a new random set? Current answers will be lost.')) return;
  }
  currentSet = buildSet();
  render(currentSet);
  document.getElementById('resultsPanel').style.display = 'none';
  document.getElementById('scoreBox').textContent = `Not yet attempted`;
  // scroll to top
  window.scrollTo({ top: 0, behavior: 'instant' });
}

// Print page
function printPage(){ window.print(); }

// Wire up buttons
document.getElementById('btnCheck').addEventListener('click', checkAnswers);
document.getElementById('btnReset').addEventListener('click', regenerate);
document.getElementById('btnShowSol').addEventListener('click', showSolutionsOnly);
document.getElementById('btnDownload').addEventListener('click', printPage);

// initialize on load
regenerate();

</script>
</body>
</html>
